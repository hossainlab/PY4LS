<!DOCTYPE html>
<html>
  <head>
    <title>CONJ620: CM 1.3</title>
    <meta charset="utf-8">
    <meta name="author" content="Alison Hill" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/ohsu.css" type="text/css" />
    <link rel="stylesheet" href="css/ohsu-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# CONJ620: CM 1.3
## Summarizing &amp; Visualizing Data
### Alison Hill

---




## Objects and functions

&gt; "To understand computations in R, two slogans are helpful:
- Everything that exists is an object, and 
- Everything that happens is a function call."


John Chambers, quoted in Advanced R, p. 79.
---
class: middle, inverse

## To make your `mutate` "stick"


```r
heart_bp &lt;- heart_bp %&gt;% 
  mutate(bp_ratio = BPXDI1 / BPXDI2)
```

[From CM 1.2, slide #39](https://apreshill.github.io/ohsu-basic-stats/slides/cm012.html#39)

---
class:middle, inverse, center
## Hygiene

![](https://media.giphy.com/media/tis8aekJB9s0E/giphy.gif)
---
class: center, middle, inverse
## Everyone do this right now...

![](https://media.giphy.com/media/zZRxy466qETsY/giphy.gif)

&gt; *"Daily work habit: Restart R very often and re-run your under-development script from the top." -[Jenny Bryan](https://www.tidyverse.org/articles/2017/12/workflow-vs-script/)*

Upper right pane: click on environment tab, then click on the broom

Lower left pane: in console tab, click on the broom too 

---
## RStudio Preferences

![](images/rstudio-preferences.png)
---
class: inverse, middle, center
## Reminder

You guys are new learners...

![](https://media.giphy.com/media/x9XRkwlj9gmju/giphy.gif)

---
## It's (probably) you, not R 

https://ismayc.github.io/rbasics-book/6-errors.html

- `Error: could not find function`
- `Error: object not found`
- Misspellings
- Unmatched parentheses
- Missing commas
- Package not installed
- Package not loaded

Consider trying `sessionInfo()` in your script to make sure the package you think you are using is there!

---


```r
sessionInfo()
```

```
R version 3.4.1 (2017-06-30)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: OS X El Capitan 10.11.6

Matrix products: default
BLAS: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRblas.0.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] forcats_0.3.0.9000 stringr_1.3.1      dplyr_0.7.5       
[4] purrr_0.2.5        readr_1.2.0        tidyr_0.8.0       
[7] tibble_1.4.2       ggplot2_2.2.1.9000 tidyverse_1.2.1   

loaded via a namespace (and not attached):
 [1] tidyselect_0.2.4.9000 xfun_0.1              reshape2_1.4.3       
 [4] haven_1.1.0           lattice_0.20-35       colorspace_1.4-0     
 [7] htmltools_0.3.6       yaml_2.1.19           rlang_0.2.0.9001     
[10] pillar_1.2.1          withr_2.1.2           foreign_0.8-69       
[13] glue_1.2.0            modelr_0.1.1          readxl_1.0.0         
[16] bindrcpp_0.2.2.9000   bindr_0.1.1.9000      plyr_1.8.4           
[19] munsell_0.4.3         gtable_0.2.0          cellranger_1.1.0     
[22] rvest_0.3.2           psych_1.7.5           evaluate_0.10.1      
[25] knitr_1.20            parallel_3.4.1        broom_0.4.2          
[28] Rcpp_0.12.17          backports_1.1.2       scales_0.5.0.9000    
[31] jsonlite_1.5          mnormt_1.5-5          hms_0.4.1            
[34] digest_0.6.15         stringi_1.2.3         xaringan_0.6.4       
[37] grid_3.4.1            rprojroot_1.3-2       cli_1.0.0            
[40] tools_3.4.1           magrittr_1.5          lazyeval_0.2.1       
[43] crayon_1.3.4          pkgconfig_2.0.1       xml2_1.2.0           
[46] lubridate_1.7.4       assertthat_0.2.0      rmarkdown_1.10.3     
[49] httr_1.3.1            rstudioapi_0.7        htmldeps_0.1.0       
[52] R6_2.2.2              nlme_3.1-131          compiler_3.4.1       
```


---
class: inverse, middle, center
## New `gitter` chat


![](https://media.giphy.com/media/uRb2p09vY8lEs/giphy.gif)

Now on our class site: link to [gitter](https://gitter.im/conj620/Lobby?utm_source=share-link&amp;utm_medium=link&amp;utm_campaign=share-link)

---
## How to ask for help

Key idea: make a "minimal reproducible example" (abbreviated: `REPREX`)

--

Minimum requirements:

- Use the smallest, simplest, most built-in data possible [(see next slide!)](#data).
- Include commands on a strict ‚Äúneed to run‚Äù basis.
- Whitespace rationing is not in effect.


From: https://reprex.tidyverse.org/articles/reprex-dos-and-donts.html

---
name: data
## Built-in data

A few good options always:


```r
iris
mtcars
airquality
ChickWeight
ToothGrowth
PlantGrowth
```

All of these are "built-in" datasets in R that you can just use and assume that *we* can also just use! üéâ

---
## Make a tibble by column

Using the `tibble` package...


```r
o2_by_col &lt;- tibble(
  x = 1:5, 
  y = 1, 
  z = letters[1:5]
)
o2_by_col
```

```
# A tibble: 5 x 3
      x     y z    
  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;
1     1    1. a    
2     2    1. b    
3     3    1. c    
4     4    1. d    
5     5    1. e    
```

https://tibble.tidyverse.org

---
## Make a tibble by row


```r
o2_by_row &lt;- tribble(
  ~x, ~y, ~z,
  1, 2, "a",
  3, 4, "b",
  5, 6, "c"
)
o2_by_row
```

```
# A tibble: 3 x 3
      x     y z    
  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
1    1.    2. a    
2    3.    4. b    
3    5.    6. c    
```

---
## This seems like a lot of work!

["Yes, creating a great reprex requires work. You are asking other people to do work too. It‚Äôs a partnership. 80% of the time you will solve your own problem in the course of writing an excellent reprex. YMMV." -Jenny Bryan](https://reprex.tidyverse.org/articles/reprex-dos-and-donts.html)

To ask/get help, you'll:

- Use the smallest, simplest, most built-in data possible [(see next slide!)](#data); and include code for it!
- Include only code needed to reproduce the error (note that you should have opened a new file and tried it yourself first!)
- Try to format things to make it easier on us- indentations and spaces help!

---
class:middle, inverse, center

## ONWARD!
![](https://media.giphy.com/media/D7IkqiEvf70ty/giphy.gif)
---

## I'm assuming...

You have:

- a working version of R,

- a working version of RStudio,

- completed DataCamp's "Introduction to the Tidyverse" (all 4 chapters)

- read chapters 1.1, 2, and 3 in ModernDive

- read chapter 4 in R4DS

---
## DC Chapter 1: Data Wrangling


.pull-left[

- print a tibble
  - `heart`

- install a package 
  - `install.packages("dplyr")`
  - do 1x per machine

- load an installed package
  - `library(dplyr)`
  - do 1x per work session

- assign a variable a name (`&lt;-`, think "gets") 

- `%&gt;%` (think "then")
]

--

.pull-right[

- `dplyr::filter`

- `dplyr::arrange`

- `dplyr::mutate`

]

---
## DC Chapter 2: Data Visualization

all `ggplot2`

- `aes(x = , y = )` (aesthetics)
- `aes(x = , y = , color = )` (add color)
- `aes(x = , y = , size = )` (add size)
- `+ facet_wrap(~ )` (facetting)

---
## DC Chapter 3: Grouping &amp; Summarizing

- `dplyr::group_by`

- `dplyr::summarize`

---
class: middle, center, inverse

# ‚åõÔ∏è

## Let's review some helpful functions for `summarize`

*especially useful for* `summarize`

*even more useful after a* `group_by`

See:

http://r4ds.had.co.nz/transform.html#summarise-funs

---




&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Description &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Usage &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; sum &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; sum(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; minimum &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; min(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; maximum &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; max(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; mean &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; mean(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; median &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; mean(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; standard deviation &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; sd(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; variance &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; var(x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; rank &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; rank(x) &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

* All allow for `na.rm` argument to remove `NA` values before summarizing. The default setting for this argument is *always* `na.rm = FALSE`, so if there is one `NA` value the summary will be `NA`.

* See "Maths Functions" in the RStudio Base R Cheatsheet:
https://github.com/rstudio/cheatsheets/blob/master/base-r.pdf


---
class:center, middle, inverse



## Muddiest points


![](https://media.giphy.com/media/l44Q7lmy0QVQVbIm4/giphy.gif)

Go here:

https://bit.ly/conj620-cm013

---
class:middle, inverse, center

## Watch Hans Rosling video

&lt;iframe src="https://embed.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen" width="100%" height="400px"&gt;&lt;/iframe&gt;


---
## Summary statistics

Generally index one of three:

1. Center
1. Spread
1. Shape

We'll focus on the first two, will return to the third.

---
## Center

What are some ways we can measure "central tendency"?

--

1. Mean (`mean`)

--

1. Median (`median`)

--

1. Mode (not terribly helpful)

--

Measures of central tendency: The mean

https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3127352/

---
## Spread

What are some ways we can measure "variation"?

--

- range (`range`), 

--

- standard deviation (`sd`), 

--

- inter-quartile range (`IQR`)


---
## Datasets Exercise Part 1





1. Find a partner

1. Read in the data


```r
library(tidyverse)
bakers_dozen &lt;- read_csv("http://bit.ly/conj620-bakers-dozen")
```


1. `filter` for the dataset number you've been assigned

1. Confirm that you have 142 rows and three columns (one of which is dataset) (hint: try printing the dataset to your console)

1. Find the mean and standard deviation of `x` and `y` using `summarize`


---
class: center, middle


```r
for_class %&gt;% 
  group_by(dataset) %&gt;% 
  summarise_all(., funs(mean, sd)) 
```

```
# A tibble: 13 x 5
   dataset x_mean y_mean  x_sd  y_sd
     &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1      1.   54.3   47.8  16.8  26.9
 2      2.   54.3   47.8  16.8  26.9
 3      3.   54.3   47.8  16.8  26.9
 4      4.   54.3   47.8  16.8  26.9
 5      5.   54.3   47.8  16.8  26.9
 6      6.   54.3   47.8  16.8  26.9
 7      7.   54.3   47.8  16.8  26.9
 8      8.   54.3   47.8  16.8  26.9
 9      9.   54.3   47.8  16.8  26.9
10     10.   54.3   47.8  16.8  26.9
11     11.   54.3   47.8  16.8  26.9
12     12.   54.3   47.8  16.8  26.9
13     13.   54.3   47.8  16.8  26.9
```
---
## Datasets Exercise Part 2



1. Plot `x` versus `y` in a scatterplot using `ggplot2`

1. Discuss with your partner whether you think the summary statistics for `x` and `y` make sense, given your visualization.
---
class: center, middle

&lt;img src="cm013_files/figure-html/unnamed-chunk-12-1.png" width="65%" style="display: block; margin: auto;" /&gt;



---
class: middle, inverse, center

&lt;blockquote class="twitter-tweet" data-lang="en"&gt;&lt;p lang="en" dir="ltr"&gt;Don&amp;#39;t trust summary statistics. Always visualize your data first &lt;a href="https://t.co/63RxirsTuY"&gt;https://t.co/63RxirsTuY&lt;/a&gt; &lt;a href="https://t.co/5j94Dw9UAf"&gt;pic.twitter.com/5j94Dw9UAf&lt;/a&gt;&lt;/p&gt;&amp;mdash; Alberto Cairo (@albertocairo) &lt;a href="https://twitter.com/albertocairo/status/765167969139765250?ref_src=twsrc%5Etfw"&gt;August 15, 2016&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src="https://platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt; 


---
## Datasaurus Dozen

&lt;img src="https://i2.wp.com/flowingdata.com/wp-content/uploads/2017/05/DataDino-600x455.gif" width="50%" style="display: block; margin: auto;" /&gt;


- https://www.autodeskresearch.com/publications/samestats

- https://github.com/lockedata/datasauRus

---
## Due before Thursday's class...

Do [these learning checks from Chapter 3](../cm013.html) in [ModernDive](http://moderndive.netlify.com/):

LC3.2-LC3.7, LC3.9-LC3.13, LC3.15

Turn in on Sakai.
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "atelier-lakeside-light",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
